<div class="view-header">
    <button class="btn btn-secondary" onclick="viewManager.showOrganizationOverviewFromStorage('{{organization|quote}}')">
        â† Back to Overview
    </button>
    <h2>ğŸ“¦ {{name|escape}}@{{version|escape}}</h2>
    <p class="text-muted">Used in {{count}} repositories</p>
</div>

<div class="dependency-details">
    <div class="detail-section">
        <h3>ğŸ“‹ Dependency Information</h3>
        <div class="info-grid">
            <div class="info-item">
                <label>Name:</label>
                <span>{{name|escape}}</span>
            </div>
            <div class="info-item">
                <label>Version:</label>
                <span>{{version|escape}}</span>
            </div>
            <div class="info-item">
                <label>Usage Count:</label>
                <span>{{count}} repositories</span>
            </div>
            {{#if category}}
            <div class="info-item">
                <label>Type:</label>
                <span class="badge badge-{{category.type}}">{{category.type|escape}}</span>
            </div>
            <div class="info-item">
                <label>Language:</label>
                <span>{{category.language|escape}}</span>
            </div>
            <div class="info-item">
                <label>Ecosystem:</label>
                <span>{{category.ecosystem|escape}}</span>
            </div>
            {{/if}}
        </div>
    </div>

    {{#if packageFunding}}
    <div class="detail-section">
        <h3>ğŸ’ Package Funding</h3>
        <div class="alert alert-info mb-2">
            <small>
                <i class="fas fa-info-circle me-1"></i>
                This package accepts donations/sponsorships.
            </small>
        </div>
        <div class="d-flex flex-wrap gap-2">
            {{#if fundingGitHub}}
            <a href="{{fundingUrl|escape}}" target="_blank" class="btn btn-sm btn-outline-danger">
                <i class="fas fa-heart me-1"></i>GitHub Sponsors
            </a>
            {{/if}}
            {{#if fundingOpenCollective}}
            <a href="{{fundingUrl|escape}}" target="_blank" class="btn btn-sm btn-outline-primary">
                <i class="fas fa-hand-holding-usd me-1"></i>Open Collective
            </a>
            {{/if}}
            {{#if fundingPatreon}}
            <a href="{{fundingUrl|escape}}" target="_blank" class="btn btn-sm btn-outline-danger">
                <i class="fab fa-patreon me-1"></i>Patreon
            </a>
            {{/if}}
            {{#if fundingTidelift}}
            <a href="{{fundingUrl|escape}}" target="_blank" class="btn btn-sm btn-outline-warning">
                <i class="fas fa-gift me-1"></i>Tidelift
            </a>
            {{/if}}
            {{#if fundingGeneric}}
            <a href="{{fundingUrl|escape}}" target="_blank" class="btn btn-sm btn-outline-info">
                <i class="fas fa-donate me-1"></i>Support
            </a>
            {{/if}}
        </div>
    </div>
    {{/if}}

    <div class="detail-section">
        <h3>ğŸ“ Used in Repositories</h3>
        <div class="repository-list">
            {{#each repositories}}
            <div class="repository-item" onclick="viewManager.showRepositoryDetailsFromAllReposIndex({{index}}, '{{organization|quote}}')" style="cursor: pointer;">
                <div class="repo-name">{{owner|escape}}/{{name|escape}}</div>
                <div class="repo-deps">{{totalDependencies}} total deps</div>
            </div>
            {{/each}}
        </div>
    </div>

    <div class="detail-section">
        <h3>ğŸ” Security Analysis</h3>
        <div class="mt-3">
            <button class="btn btn-primary btn-sm" onclick="viewManager.quickScanDependency('{{name|quote}}', '{{version|quote}}', '{{organization|quote}}')">
                <i class="fas fa-shield-alt"></i> Quick Vulnerability Scan
            </button>
            <button class="btn btn-info btn-sm" onclick="viewManager.showVulnerabilityCacheStats()">
                <i class="fas fa-database"></i> Cache Stats
            </button>
            <button class="btn btn-warning btn-sm" onclick="viewManager.clearVulnerabilityCache()">
                <i class="fas fa-trash"></i> Clear Cache
            </button>
        </div>
    </div>

    <div class="detail-section">
        <h3>âš–ï¸ License Information</h3>
        {{#if hasLicenseAnalysis}}
        {{licenseInfoHTML}}
        {{else}}
        <div class="alert alert-info">
            <h6>ğŸ“‹ No License Analysis Available</h6>
            <p>License analysis hasn't been performed for this organization yet. License information will be available after the next analysis run.</p>
            <div class="mt-3">
                <button class="btn btn-success btn-sm" onclick="viewManager.runLicenseComplianceCheck('{{organization|quote}}')">
                    <i class="fas fa-gavel"></i> Run License Compliance Check
                </button>
            </div>
        </div>
        {{/if}}
    </div>

    <div class="detail-section">
        <h3>ğŸ” Future Enhancements</h3>
        <div class="enhancement-list">
            <div class="enhancement-item">
                <span class="enhancement-icon">ğŸ”—</span>
                <span>GitHub Package Registry info</span>
            </div>
            <div class="enhancement-item">
                <span class="enhancement-icon">ğŸ“Š</span>
                <span>NPM download statistics</span>
            </div>
            <div class="enhancement-item">
                <span class="enhancement-icon">ğŸ“ˆ</span>
                <span>Version popularity trends</span>
            </div>
        </div>
    </div>
</div>

